---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getAllItems } from '../lib/items';

const items = getAllItems();

const timelinePeriods = [
  { name: 'Ancient Near East', range: '3000 BC - 500 BC', items: items.filter(i => i.period.includes('Akkadian') || i.period.includes('Sumerian') || i.period.includes('Mesopotam')) },
  { name: 'Classical Greek', range: '500 BC - 323 BC', items: items.filter(i => i.period.includes('Greek') || i.period.includes('Helleni')) },
  { name: 'Roman', range: '500 BC - 476 AD', items: items.filter(i => i.period.includes('Roman')) },
  { name: 'Byzantine', range: '330 AD - 1453 AD', items: items.filter(i => i.period.includes('Byzantine')) },
  { name: 'Medieval', range: '500 AD - 1500 AD', items: items.filter(i => i.period.includes('Medieval')) },
  { name: 'Modern', range: '1500 AD - Present', items: items.filter(i => i.period.includes('Modern')) },
].filter(p => p.items.length > 0);
---

<BaseLayout title="Timeline | Collection">
  <section class="container-narrow py-16">
    <div class="mb-12">
      <h1 class="font-serif text-4xl md:text-5xl mb-4">Timeline</h1>
      <p class="text-charcoal/60 text-lg">
        Explore the collection through the ages.
      </p>
    </div>

    <div class="relative">
      <div class="absolute left-4 md:left-1/2 top-0 bottom-0 w-px bg-charcoal/20"></div>

      {timelinePeriods.map((period, index) => (
        <div class={`relative mb-16 ${index % 2 === 0 ? 'md:pr-1/2 md:text-right' : 'md:pl-1/2 md:ml-auto'}`}>
          <div class={`absolute left-4 md:left-1/2 w-3 h-3 bg-gold rounded-full -translate-x-1.5`}></div>

          <div class={`ml-12 md:ml-0 ${index % 2 === 0 ? 'md:mr-12' : 'md:ml-12'}`}>
            <p class="text-xs uppercase tracking-widest text-charcoal/50 mb-1">{period.range}</p>
            <h2 class="font-serif text-2xl mb-4">{period.name}</h2>

            <div class={`grid gap-4 ${index % 2 === 0 ? 'md:justify-end' : ''}`}>
              {period.items.map((item) => (
                <a
                  href={`/item/${item.id}`}
                  class="block p-4 bg-white rounded-sm hover:shadow-md transition-shadow max-w-sm"
                >
                  <p class="font-serif text-lg hover:text-gold transition-colors">{item.name}</p>
                  <p class="text-sm text-charcoal/60">{item.era}</p>
                </a>
              ))}
            </div>
          </div>
        </div>
      ))}

      {timelinePeriods.length === 0 && (
        <div class="text-center py-20 text-charcoal/50">
          <p class="text-lg">Add items to see the timeline</p>
        </div>
      )}
    </div>
  </section>
</BaseLayout>
